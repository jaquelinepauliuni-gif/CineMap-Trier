---
interface License {
  id: string;
  text: string;
}

const { licenses } = Astro.props as { licenses: License[] };
---

<div class="w-full max-w-6xl mx-auto my-12">
  <details id="license-accordion" class="group border border-gray-300 rounded-md p-4">
    <summary class="flex justify-between items-center cursor-pointer list-none">
      <h2 class="team text-xl">Bildlizenzen</h2>
      <span class="text-2xl transition-transform duration-300 group-open:rotate-45">+</span>
    </summary>

    <div class="mt-4 space-y-4">
      {licenses.map((license) => (
        <p
          id={`license-${license.id}`}
          class="pl-6 -indent-6 text-sm leading-relaxed"
        >
          [{license.id}]: {license.text}
        </p>
      ))}
    </div>
  </details>
</div>

<script>
  document.addEventListener("click", (e) => {
    if (!(e.target instanceof Element)) return;

    const link = e.target.closest('a[href^="#license-"]');
    if (!link) return;

    const accordion = document.getElementById("license-accordion");
    if (accordion instanceof HTMLDetailsElement && !accordion.open) {
      accordion.open = true;
    }
  });
</script>
